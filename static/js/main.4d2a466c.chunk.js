(window["webpackJsonpping-pong"]=window["webpackJsonpping-pong"]||[]).push([[0],{28:function(e,n,a){e.exports=a(57)},33:function(e,n,a){},57:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),l=a(7),c=a.n(l),o=(a(33),a(1)),i=function(){return r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",null,"PongPing"))},u=a(20),m=a(21),s=a(26),p=a(22),y=a(4),h=a(27),g=function(e){function n(e){var a;return Object(u.a)(this,n),(a=Object(s.a)(this,Object(p.a)(n).call(this,e))).state={player1Name:e.player1Name,player2Name:e.player2Name,winningScore:e.winningScore,alternate:e.alternate},a.handlePlayer1NameChange=a.handlePlayer1NameChange.bind(Object(y.a)(a)),a.handlePlayer2NameChange=a.handlePlayer2NameChange.bind(Object(y.a)(a)),a.handleWinScoreChange=a.handleWinScoreChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a.handleAlt=a.handleAlt.bind(Object(y.a)(a)),a}return Object(h.a)(n,e),Object(m.a)(n,[{key:"handlePlayer1NameChange",value:function(e){this.setState({player1Name:e.currentTarget.value})}},{key:"handlePlayer2NameChange",value:function(e){this.setState({player2Name:e.currentTarget.value})}},{key:"handleWinScoreChange",value:function(e){this.setState({winningScore:e.currentTarget.value})}},{key:"handleAlt",value:function(e){this.setState({alternate:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.handleSave(this.state)}},{key:"render",value:function(){var e=this.state,n=e.player1Name,a=e.player2Name,t=e.winningScore,l=e.alternate;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Player 1 Name"),r.a.createElement("input",{className:"form-control",onChange:this.handlePlayer1NameChange,value:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Player 2 Name"),r.a.createElement("input",{className:"form-control",onChange:this.handlePlayer2NameChange,value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Winning Score"),r.a.createElement("input",{type:"number",className:"form-control",onChange:this.handleWinScoreChange,value:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Alternate Every"),r.a.createElement("input",{type:"number",className:"form-control",onChange:this.handleAlt,value:l})),r.a.createElement("button",{className:"btn btn-primary"},"Save"))}}]),n}(t.Component),b=a(23),f=a.n(b).a.create({baseURL:"http://rowley.restful.training/api/ping-pong/games/",params:{key:"329b4a1603504df9b05cba4b9dbfe57c68e1946c"},headers:{Accept:"application/json"}}),d=function(e){return function(n,a){f.patch("".concat(a().id,"/score"),{player:e}).then((function(a){a.data;console.log(e),n(function(e){return{type:"incrementScore",player:"player"+e}}(e))}))}},E=Object(o.b)((function(e){return{player1Name:e.player1Name,player2Name:e.player2Name,winningScore:e.winningScore,alternate:e.alternate}}),(function(e){return{handleSave:function(n){e(function(e){var n=e.player1Name,a=e.player2Name,t=e.winningScore,r=e.alternate;return function(e){f.post("/",{player_1:n,player_2:a,winning_score:t,change_serve:r}).then((function(n){var a=n.data;e(function(e){var n=e.id,a=e.player_1,t=e.player_2,r=e.winning_score,l=e.change_serve;return{type:"save",id:n,player1Name:a.name,player2Name:t.name,winningScore:+r,alternate:+l}}(a.data))}))}}(n))}}}))(g),N=function(e){var n=e.playerName,a=e.score,t=e.handleIncrement,l=e.winner,c=e.server;return r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("p",null,n," ",c?r.a.createElement("span",{className:"pull-right label label-success"},"Serving"):null),r.a.createElement("p",{className:"well"},a),0!==l?null:r.a.createElement("button",{onClick:t,className:"btn btn-primary"},"+"))},v=Object(o.b)((function(e){return{playerName:e.player1Name,score:e.player1,winner:e.winner,server:0===e.server}}),(function(e){return{handleIncrement:function(){return e(d(1))}}}))(N),w=Object(o.b)((function(e){return{playerName:e.player2Name,score:e.player2,winner:e.winner,server:0!==e.server}}),(function(e){return{handleIncrement:function(){return e(d(2))}}}))(N),O=function(e){var n=e.winner,a=e.player;return 0===n?null:r.a.createElement("h2",{className:"jumbotron"},a," wins!")},S=Object(o.b)((function(e){return{winner:e.winner,player:1===e.winner?e.player1Name:e.player2Name}}))(O),j=function(e){var n=e.handleReset;return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("button",{onClick:n,className:"btn btn-danger"},"Reset"))},_=Object(o.b)(null,(function(e){return{handleReset:function(){return e({type:"reset"})}}}))(j),P=function(e){var n=e.games;return 0===n.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Game History"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Winner"),r.a.createElement("th",{scope:"col"},"Winner'sScore"),r.a.createElement("th",{scope:"col"},"Loser"),r.a.createElement("th",{scope:"col"},"Loser's Score"))),r.a.createElement("tbody",null,n.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("th",null,"Game: ",n+1),r.a.createElement("th",null,e.player_1.won?e.player_1.name:e.player_2.name),r.a.createElement("th",null,e.player_1.won?e.player_1.score:e.player_2.score),r.a.createElement("th",null,e.player_1.won?e.player_2.name:e.player_1.name," "),r.a.createElement("th",null,e.player_1.won?e.player_2.score:e.player_1.score))})))))},C=Object(o.b)((function(e){return{games:e.games}}))(P),k=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement(v,null),r.a.createElement(w,null)),r.a.createElement(S,null),r.a.createElement(_,null),r.a.createElement(C,null))},D=function(e){var n=e.settings;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,null),n?r.a.createElement(k,null):r.a.createElement(E,null))},W=Object(o.b)((function(e){return{settings:e.settings}}))(D),A=a(25),T=a(12),I={player1:0,player2:0,server:0,winner:0,games:[],player1Name:"",player2Name:"",winningScore:21,alternate:5,settings:!1,id:0};function R(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function F(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?R(a,!0).forEach((function(n){Object(T.a)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var L=function(e){return Math.abs(e.player1-e.player2)>=2},M=function(e){return e.player1>=e.winningScore||e.player2>=e.winningScore},x=function(e){return e.player1>e.player2?1:2},G=function(e,n){switch(n.type){case"incrementScore":return function(e){var n=e.games;return 0===e.winner?e:F({},e,{games:[].concat(Object(A.a)(n),[{player_1:{name:e.player1Name,score:e.player1,won:e.player1>e.player2},player_2:{name:e.player2Name,score:e.player2,won:e.player2>e.player1}}])})}(function(e){return F({},e,{winner:L(e)&&M(e)?x(e):0})}(function(e){var n=e.player1+e.player2,a=M(e)?2:e.alternate;return F({},e,{server:Math.floor(n/a)%2})}(function(e,n){return F({},e,Object(T.a)({},n,e[n]+1))}(e,n.player))));case"reset":return F({},I,{games:e.games});case"save":return function(e,n){return F({},e,{id:n.id,player1Name:n.player1Name,player2Name:n.player2Name,winningScore:+n.winningScore,alternate:+n.alternate,settings:!0})}(e,n);default:return e}},J=a(6),U=a(24),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.c,B=Object(J.d)(G,I,X(Object(J.a)(U.a)));c.a.render(r.a.createElement(o.a,{store:B},r.a.createElement(W,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.4d2a466c.chunk.js.map